define("#jsv/4.0.2/uri/uri",[],function(a,b){b===void 0&&(b={}),"function"!=typeof a&&(a=function(){return b}),function(){var a=function(){for(var b=arguments[0],c=1,d=arguments[c];d;)b=b.slice(0,-1)+d.slice(1),d=arguments[++c];return b},c=function(a){return"(?:"+a+")"},d="[A-Za-z]",f="[0-9]",h=a(f,"[A-Fa-f]"),k=c("%"+h+h),l="[\\:\\/\\?\\#\\[\\]\\@]",m="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",n=a(l,m),o=a(d,f,"[\\-\\.\\_\\~]"),p=c(d+a(d,f,"[\\+\\-\\.]")+"*"),q=c(c(k+"|"+a(o,m,"[\\:]"))+"*"),r=c(c("25[0-5]")+"|"+c("2[0-4]"+f)+"|"+c("1"+f+f)+"|"+c("[1-9]"+f)+"|"+f),s=c(r+"\\."+r+"\\."+r+"\\."+r),t=c(h+"{1,4}"),v=(c(c(t+"\\:"+t)+"|"+s),c(a(o,m,"[\\:]")+"+")),w=c("v"+h+"+\\."+a(o,m,"[\\:]")+"+"),x=c("\\["+c(v+"|"+w)+"\\]"),y=c(c(k+"|"+a(o,m))+"*"),z=c(x+"|"+s+"|"+y),A=c(f+"*"),B=c(c(q+"@")+"?"+z+c("\\:"+A)+"?"),C=c(k+"|"+a(o,m,"[\\:\\@]")),D=c(C+"*"),E=c(C+"+"),F=c(c(k+"|"+a(o,m,"[\\@]"))+"+"),G=c(c("\\/"+D)+"*"),H=c("\\/"+c(E+G)+"?"),I=c(F+G),J=c(E+G),K=c(""),M=(c(G+"|"+H+"|"+I+"|"+J+"|"+K),c(c(C+"|[\\/\\?]")+"*")),N=c(c(C+"|[\\/\\?]")+"*"),O=c(c("\\/\\/"+B+G)+"|"+H+"|"+J+"|"+K),P=c(p+"\\:"+O+c("\\?"+M)+"?"+c("\\#"+N)+"?"),Q=c(c("\\/\\/"+B+G)+"|"+H+"|"+I+"|"+K),R=c(Q+c("\\?"+M)+"?"+c("\\#"+N)+"?"),U=(c(P+"|"+R),c(p+"\\:"+O+c("\\?"+M)+"?"),RegExp("^"+c("("+P+")|("+R+")")+"$")),V=RegExp("^("+p+")\\:"+c(c("\\/\\/("+c("("+q+")@")+"?("+z+")"+c("\\:("+A+")")+"?)")+"?("+G+"|"+H+"|"+J+"|"+K+")")+c("\\?("+M+")")+"?"+c("\\#("+N+")")+"?$"),W=RegExp("^(){0}"+c(c("\\/\\/("+c("("+q+")@")+"?("+z+")"+c("\\:("+A+")")+"?)")+"?("+G+"|"+H+"|"+I+"|"+K+")")+c("\\?("+M+")")+"?"+c("\\#("+N+")")+"?$"),$=(RegExp("^("+p+")\\:"+c(c("\\/\\/("+c("("+q+")@")+"?("+z+")"+c("\\:("+A+")")+"?)")+"?("+G+"|"+H+"|"+J+"|"+K+")")+c("\\?("+M+")")+"?$"),RegExp("^"+c("\\#("+N+")")+"?$"),RegExp("^"+c("("+q+")@")+"?("+z+")"+c("\\:("+A+")")+"?$"),RegExp(a("[^]",d,f,"[\\+\\-\\.]"),"g")),_=RegExp(a("[^\\%\\:]",o,m),"g"),ab=RegExp(a("[^\\%]",o,m),"g"),bb=RegExp(a("[^\\%\\/\\:\\@]",o,m),"g"),cb=RegExp(a("[^\\%\\/\\@]",o,m),"g"),db=RegExp(a("[^\\%]",o,m,"[\\:\\@\\/\\?]"),"g"),eb=db,fb=RegExp(a("[^]",o,m),"g"),gb=RegExp(o,"g"),ib=(RegExp(a("[^\\%]",o,n),"g"),RegExp(k+"+","g")),jb=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/i,kb=/^\.\.?\//,lb=/^\/\.(\/|$)/,mb=/^\/\.\.(\/|$)/,ob=/^\/?.*?(?=\/|$)/,pb=void 0==="".match(/(){0}/)[1],qb=function(a){var b=a.charCodeAt(0);return 128>b?"%"+b.toString(16).toUpperCase():b>127&&2048>b?"%"+(192|b>>6).toString(16).toUpperCase()+"%"+(128|63&b).toString(16).toUpperCase():"%"+(224|b>>12).toString(16).toUpperCase()+"%"+(128|63&b>>6).toString(16).toUpperCase()+"%"+(128|63&b).toString(16).toUpperCase()},rb=function(a){for(var d,e,b="",c=0;a.length>c;)d=parseInt(a.substr(c+1,2),16),128>d?(e=String.fromCharCode(d),b+=e.match(gb)?e:a.substr(c,3),c+=3):d>191&&224>d?(b+=a.substr(c,6),c+=6):(b+=a.substr(c,9),c+=9);return b},sb=function(a){for(var d,e,f,b="",c=0;a.length>c;)d=parseInt(a.substr(c+1,2),16),128>d?(b+=String.fromCharCode(d),c+=3):d>191&&224>d?(e=parseInt(a.substr(c+4,2),16),b+=String.fromCharCode((31&d)<<6|63&e),c+=6):(e=parseInt(a.substr(c+4,2),16),f=parseInt(a.substr(c+7,2),16),b+=String.fromCharCode((15&d)<<12|(63&e)<<6|63&f),c+=9);return b},tb=function(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()},ub=function(){this.errors=[]},vb=b;ub.prototype={scheme:void 0,authority:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0,reference:void 0,errors:void 0},vb.SCHEMES={},vb.parse=function(a,b){var c,e,d=new ub;return a=a?""+a:"",b=b||{},"suffix"===b.reference&&(a=(b.scheme?b.scheme+":":"")+"//"+a),c=a.match(U),c&&(c=c[1]?a.match(V):a.match(W)),c||(b.tolerant||d.errors.push("URI is not strictly valid."),c=a.match(jb)),c?(pb?(d.scheme=c[1],d.authority=c[2],d.userinfo=c[3],d.host=c[4],d.port=parseInt(c[5],10),d.path=c[6]||"",d.query=c[7],d.fragment=c[8],isNaN(d.port)&&(d.port=c[5])):(d.scheme=c[1]||void 0,d.authority=-1!==a.indexOf("//")?c[2]:void 0,d.userinfo=-1!==a.indexOf("@")?c[3]:void 0,d.host=-1!==a.indexOf("//")?c[4]:void 0,d.port=parseInt(c[5],10),d.path=c[6]||"",d.query=-1!==a.indexOf("?")?c[7]:void 0,d.fragment=-1!==a.indexOf("#")?c[8]:void 0,isNaN(d.port)&&(d.port=a.match(/\/\/.*\:(?:\/|\?|\#|$)/)?c[4]:void 0)),d.reference=d.scheme||d.authority||d.path||d.query?d.scheme?d.fragment?"uri":"absolute":"relative":"same-document",b.reference&&"suffix"!==b.reference&&b.reference!==d.reference&&d.errors.push("URI is not a "+b.reference+" reference."),e=vb.SCHEMES[(d.scheme||b.scheme||"").toLowerCase()],e&&e.parse&&e.parse(d,b)):d.errors.push("URI can not be parsed."),d},vb._recomposeAuthority=function(a){var b=[];return(void 0!==a.userinfo||void 0!==a.host||"number"==typeof a.port)&&(void 0!==a.userinfo&&(b.push((""+a.userinfo).replace(_,qb)),b.push("@")),void 0!==a.host&&b.push((""+a.host).toLowerCase().replace(ab,qb)),"number"==typeof a.port&&(b.push(":"),b.push(a.port.toString(10)))),b.length?b.join(""):void 0},vb.removeDotSegments=function(a){for(var c,b=[];a.length;)a.match(kb)?a=a.replace(kb,""):a.match(lb)?a=a.replace(lb,"/"):a.match(mb)?(a=a.replace(mb,"/"),b.pop()):"."===a||".."===a?a="":(c=a.match(ob)[0],a=a.slice(c.length),b.push(c));return b.join("")},vb.serialize=function(a,b){var d,e,c=[];return b=b||{},d=vb.SCHEMES[a.scheme||b.scheme],d&&d.serialize&&d.serialize(a,b),"suffix"!==b.reference&&a.scheme&&(c.push((""+a.scheme).toLowerCase().replace($,"")),c.push(":")),a.authority=vb._recomposeAuthority(a),void 0!==a.authority&&("suffix"!==b.reference&&c.push("//"),c.push(a.authority),a.path&&"/"!==a.path.charAt(0)&&c.push("/")),a.path&&(e=vb.removeDotSegments((""+a.path).replace(/%2E/gi,".")),e=a.scheme?e.replace(bb,qb):e.replace(cb,qb),void 0===a.authority&&(e=e.replace(/^\/\//,"/%2F")),c.push(e)),a.query&&(c.push("?"),c.push((""+a.query).replace(db,qb))),a.fragment&&(c.push("#"),c.push((""+a.fragment).replace(eb,qb))),c.join("").replace(ib,rb).replace(/%[0-9A-Fa-f]{2}/g,function(a){return a.toUpperCase()})},vb.resolveComponents=function(a,b,c,d){var e=new ub;return d||(a=vb.parse(vb.serialize(a,c),c),b=vb.parse(vb.serialize(b,c),c)),c=c||{},!c.tolerant&&b.scheme?(e.scheme=b.scheme,e.authority=b.authority,e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=vb.removeDotSegments(b.path),e.query=b.query):(void 0!==b.authority?(e.authority=b.authority,e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=vb.removeDotSegments(b.path),e.query=b.query):(b.path?("/"===b.path.charAt(0)?e.path=vb.removeDotSegments(b.path):(e.path=void 0===a.authority||a.path?a.path?a.path.slice(0,a.path.lastIndexOf("/")+1)+b.path:b.path:"/"+b.path,e.path=vb.removeDotSegments(e.path)),e.query=b.query):(e.path=a.path,e.query=void 0!==b.query?b.query:a.query),e.authority=a.authority,e.userinfo=a.userinfo,e.host=a.host,e.port=a.port),e.scheme=a.scheme),e.fragment=b.fragment,e},vb.resolve=function(a,b,c){return vb.serialize(vb.resolveComponents(vb.parse(a,c),vb.parse(b,c),c,!0),c)},vb.normalize=function(a,b){return"string"==typeof a?vb.serialize(vb.parse(a,b),b):"object"===tb(a)?vb.parse(vb.serialize(a,b),b):a},vb.equal=function(a,b,c){return"string"==typeof a?a=vb.serialize(vb.parse(a,c),c):"object"===tb(a)&&(a=vb.serialize(a,c)),"string"==typeof b?b=vb.serialize(vb.parse(b,c),c):"object"===tb(b)&&(b=vb.serialize(b,c)),a===b},vb.escapeComponent=function(a){return a&&(""+a).replace(fb,qb)},vb.unescapeComponent=function(a){return a&&(""+a).replace(ib,sb)},b.pctEncChar=qb,b.pctDecChars=sb,b.Components=ub,b.URI=vb,b.pctEncChar=qb,b.pctDecChars=sb,b.Components=ub,b.URI={SCHEMES:vb.SCHEMES,parse:vb.parse,removeDotSegments:vb.removeDotSegments,serialize:vb.serialize,resolveComponents:vb.resolveComponents,resolve:vb.resolve,normalize:vb.normalize,equal:vb.equal,escapeComponent:vb.escapeComponent,unescapeComponent:vb.unescapeComponent}}()}),define("#jsv/4.0.2/environments",["./jsv"],function(a){a("./json-schema-draft-01"),a("./json-schema-draft-02"),a("./json-schema-draft-03")}),define("#jsv/4.0.2/json-schema-draft-01",["./jsv"],function(a){(function(){var d,e,f,g,h,b={},c=a("./jsv").JSV;e={string:function(a){return"string"===a.getType()},number:function(a){return"number"===a.getType()},integer:function(a){return"number"===a.getType()&&0===a.getValue()%1},"boolean":function(a){return"boolean"===a.getType()},object:function(a){return"object"===a.getType()},array:function(a){return"array"===a.getType()},"null":function(a){return"null"===a.getType()},any:function(){return!0}},d=new c.Environment,d.setOption("defaultFragmentDelimiter","."),d.setOption("defaultSchemaURI","http://json-schema.org/schema#"),f=d.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,b){var d;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(d=b.getValueOfProperty("parser"),c.mapArray(a.getProperties(),function(a){return d(a,b)})):"any"},validator:function(a,d,e,f,g,h,i){var k,l,m,n,o,j=c.toArray(d.getAttribute("type"));if("undefined"!==a.getType()&&j&&j.length){for(o=e.getValueOfProperty("typeValidators")||{},k=0,l=j.length;l>k;++k)if(m=j[k],c.isJSONSchema(m)){if(n=c.createObject(f),n.errors=[],n.validated=c.clone(f.validated),0===m.validate(a,n,g,h,i).errors.length)return!0}else{if(o[m]===b[m]||"function"!=typeof o[m])return!0;if(o[m](a,f))return!0}return f.addError(a,d,"type","Instance is not a required type",j),!1}return!0},typeValidators:e},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,b,d){var e=a.getEnvironment(),f=b.getEnvironment();return"object"===a.getType()?d?e.createSchema(a.getProperty(d),f.findSchema(b.resolveURI("#"))):c.mapObject(a.getProperties(),function(a){return e.createSchema(a,f.findSchema(b.resolveURI("#")))}):{}},validator:function(a,c,d,e){var i,j;if("object"===a.getType()){i=c.getAttribute("properties");for(j in i)i[j]!==b[j]&&i[j]&&i[j].validate(a.getProperty(j),e,a,c,j)}}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?c.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,d,e){var i,j,k,l,m,n;if("array"===a.getType())if(i=a.getProperties(),j=b.getAttribute("items"),n=b.getAttribute("additionalProperties"),"array"===c.typeOf(j))for(k=0,l=i.length;l>k;++k)m=j[k]||n,m!==!1?m.validate(i[k],e,a,b,k):e.addError(a,b,"additionalProperties","Additional items are not allowed",m);else for(m=j||n,k=0,l=i.length;l>k;++k)m.validate(i[k],e,a,b,k)}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"!==a.getType()||b.getAttribute("optional")||d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"boolean"===a.getType()&&a.getValue()===!1?!1:a.getEnvironment().createEmptySchema()},validator:function(a,d,e,f){var j,k,l,m;if("object"===a.getType()){j=d.getAttribute("additionalProperties"),k=d.getAttribute("properties")||{},l=a.getProperties();for(m in l)l[m]!==b[m]&&l[m]&&!k[m]&&(c.isJSONSchema(j)?j.validate(l[m],f,a,d,m):j===!1&&f.addError(a,d,"additionalProperties","Additional properties are not allowed",j))}}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):void 0},validator:function(a,b,d,e,f){var i;"undefined"!==a.getType()&&f&&"undefined"!==f.getType()&&(i=b.getAttribute("requires"),"string"==typeof i?"undefined"===f.getProperty(i).getType()&&e.addError(a,b,"requires",'Property requires sibling property "'+i+'"',i):c.isJSONSchema(i)&&i.validate(f,e))}},minimum:{type:"number",optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("minimum"),i=b.getAttribute("minimumCanEqual"),"number"==typeof h&&(h>a.getValue()||i===!1&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less than the required minimum value",h))}},maximum:{type:"number",optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("maximum"),i=b.getAttribute("maximumCanEqual"),"number"==typeof h&&(a.getValue()>h||i===!1&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",h))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){var h;"array"===a.getType()&&(h=b.getAttribute("minItems"),"number"==typeof h&&h>a.getProperties().length&&d.addError(a,b,"minItems","The number of items is less than the required minimum",h))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;"array"===a.getType()&&(h=b.getAttribute("maxItems"),"number"==typeof h&&a.getProperties().length>h&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",h))}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a){return"string"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;try{h=RegExp(b.getAttribute("pattern")),"string"===a.getType()&&h&&!h.test(a.getValue())&&d.addError(a,b,"pattern","String does not match pattern",""+h)}catch(i){d.addError(a,b,"pattern","Invalid pattern",i)}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){var h;"string"===a.getType()&&(h=b.getAttribute("minLength"),"number"==typeof h&&h>a.getValue().length&&d.addError(a,b,"minLength","String is less than the required minimum length",h))}},maxLength:{type:"integer",optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;"string"===a.getType()&&(h=b.getAttribute("maxLength"),"number"==typeof h&&a.getValue().length>h&&d.addError(a,b,"maxLength","String is greater than the required maximum length",h))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a){return"array"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i,j;if("undefined"!==a.getType()&&(h=b.getAttribute("enum"))){for(i=0,j=h.length;j>i;++i)if(a.equals(h[i]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",h)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a){return"string"===a.getType()?a.getValue():void 0},validator:function(a,c,d,e){var i,j;"string"===a.getType()&&(i=c.getAttribute("format"),j=d.getValueOfProperty("formatValidators"),"string"!=typeof i||j[i]===b[i]||"function"!=typeof j[i]||j[i].call(this,a,e)||e.addError(a,c,"format","String is not in the required format",i))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},"default":{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("maxDecimal"),"number"==typeof h&&(i=a.getValue().toString(10).split(".")[1],i&&i.length>h&&d.addError(a,b,"maxDecimal","The number of decimal places is greater than the allowed maximum",h)))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a){return"string"===a.getType()||"array"===a.getType()?a.getValue():void 0},validator:function(a,d,e,f){var k,l,m,n,j=c.toArray(d.getAttribute("disallow"));if("undefined"!==a.getType()&&j&&j.length){for(n=e.getValueOfProperty("typeValidators")||{},k=0,l=j.length;l>k;++k)if(m=j[k],n[m]!==b[m]&&"function"==typeof n[m]&&n[m](a,f))return f.addError(a,d,"disallow","Instance is a disallowed type",j),!1;return!0}return!0},typeValidators:e},"extends":{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?c.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):void 0},validator:function(a,b,d,e,f,g,h){var j,k,i=b.getAttribute("extends");if(i)if(c.isJSONSchema(i))i.validate(a,e,f,g,h);else if("array"===c.typeOf(i))for(j=0,k=i.length;k>j;++j)i[j].validate(a,e,f,g,h)}}},optional:!0,"default":{},fragmentResolution:"dot-delimited",parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b):void 0},validator:function(a,d,e,f,g,h,i){var k,l,n,j=d.getPropertyNames(),m=e.getAttribute("properties");for(k in m)m[k]!==b[k]&&m[k].getValueOfProperty("validationRequired")&&c.pushUnique(j,k);for(k=0,l=j.length;l>k;++k)m[j[k]]!==b[j[k]]&&(n=m[j[k]].getValueOfProperty("validator"),"function"==typeof n&&n(a,d,m[j[k]],f,g,h,i))},initializer:function(a){var b,d,e;return b=a._schema.getLink("describedby",a),b&&a._schema._uri!==b&&a.setReference("describedby",b),b=a._schema.getLink("self",a),"string"===c.typeOf(b)&&(a._uri=c.formatURI(b)),b=a._schema.getLink("full",a),b&&a._uri!==b&&a.setReference("full",b),d=a.getAttribute("extends"),c.isJSONSchema(d)&&(e=c.inherits(d,a,!0),a=a._env.createSchema(e,a._schema,a._uri)),a}},!0,"http://json-schema.org/schema#"),g=d.createSchema(c.inherits(f,d.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,d){var e,f=b.getValueOfProperty("items").$ref,g=b.getEnvironment().findSchema(f),h=g&&g.getValueOfProperty("parser");return d=c.toArray(d),e="function"==typeof h?c.mapArray(a.getProperties(),function(a){return h(a,g)}):c.toArray(a.getValue()),d[0]&&(e=c.filterArray(e,function(a){return a.rel===d[0]})),d[1]&&(e=c.mapArray(e,function(a){var b=d[1],e=a.href;return e=e.replace(/\{(.+)\}/g,function(a,c){var f;return f="-this"===c?b.getValue():b.getValueOfProperty(c),void 0!==f?f+"":""}),e?c.formatURI(b.resolveURI(e)):e})),e}},fragmentResolution:{type:"string",optional:!0,"default":"dot-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d){var h;"undefined"!==a.getType()&&(h=b.getAttribute("pathStart"),"string"==typeof h&&0!==a.getURI().indexOf(h)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+h,h))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}]},f),!0),!0,"http://json-schema.org/hyper-schema#"),d.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#"),h=d.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},method:{type:"string","default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,d){var e=a.getEnvironment(),f=b.getEnvironment(),g=b.getValueOfProperty("additionalProperties").$ref;return"object"===a.getType()?d?e.createSchema(a.getProperty(d),f.findSchema(b.resolveURI(g))):c.mapObject(a.getProperties(),function(a){return e.createSchema(a,f.findSchema(b.resolveURI(g)))}):void 0}}},parser:function(a,b){var d=b.getProperty("properties");return"object"===a.getType()?c.mapObject(a.getProperties(),function(a,b){var c=d.getProperty(b),e=c&&c.getValueOfProperty("parser");return"function"==typeof e?e(a,c):a.getValue()}):a.getValue()}},g,"http://json-schema.org/links#"),c.registerEnvironment("json-schema-draft-00",d),c.registerEnvironment("json-schema-draft-01",c.createEnvironment("json-schema-draft-00")),c.getDefaultEnvironmentID()||c.setDefaultEnvironmentID("json-schema-draft-01")})()}),define("#jsv/4.0.2/json-schema-draft-02",["./jsv"],function(a){(function(){var d,e,f,g,h,b={},c=a("./jsv").JSV;e={string:function(a){return"string"===a.getType()},number:function(a){return"number"===a.getType()},integer:function(a){return"number"===a.getType()&&0===a.getValue()%1},"boolean":function(a){return"boolean"===a.getType()},object:function(a){return"object"===a.getType()},array:function(a){return"array"===a.getType()},"null":function(a){return"null"===a.getType()},any:function(){return!0}},d=new c.Environment,d.setOption("defaultFragmentDelimiter","/"),d.setOption("defaultSchemaURI","http://json-schema.org/schema#"),f=d.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,b){var d;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(d=b.getValueOfProperty("parser"),c.mapArray(a.getProperties(),function(a){return d(a,b)})):"any"},validator:function(a,d,e,f,g,h,i){var k,l,m,n,o,j=c.toArray(d.getAttribute("type"));if("undefined"!==a.getType()&&j&&j.length){for(o=e.getValueOfProperty("typeValidators")||{},k=0,l=j.length;l>k;++k)if(m=j[k],c.isJSONSchema(m)){if(n=c.createObject(f),n.errors=[],n.validated=c.clone(f.validated),0===m.validate(a,n,g,h,i).errors.length)return!0}else{if(o[m]===b[m]||"function"!=typeof o[m])return!0;if(o[m](a,f))return!0}return f.addError(a,d,"type","Instance is not a required type",j),!1}return!0},typeValidators:e},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,b,d){var e=a.getEnvironment(),f=b.getEnvironment();return"object"===a.getType()?d?e.createSchema(a.getProperty(d),f.findSchema(b.resolveURI("#"))):c.mapObject(a.getProperties(),function(a){return e.createSchema(a,f.findSchema(b.resolveURI("#")))}):{}},validator:function(a,c,d,e){var i,j;if("object"===a.getType()){i=c.getAttribute("properties");for(j in i)i[j]!==b[j]&&i[j]&&i[j].validate(a.getProperty(j),e,a,c,j)}}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?c.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,d,e){var i,j,k,l,m,n;if("array"===a.getType())if(i=a.getProperties(),j=b.getAttribute("items"),n=b.getAttribute("additionalProperties"),"array"===c.typeOf(j))for(k=0,l=i.length;l>k;++k)m=j[k]||n,m!==!1?m.validate(i[k],e,a,b,k):e.addError(a,b,"additionalProperties","Additional items are not allowed",m);else for(m=j||n,k=0,l=i.length;l>k;++k)m.validate(i[k],e,a,b,k)}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"!==a.getType()||b.getAttribute("optional")||d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"boolean"===a.getType()&&a.getValue()===!1?!1:a.getEnvironment().createEmptySchema()},validator:function(a,d,e,f){var j,k,l,m;if("object"===a.getType()){j=d.getAttribute("additionalProperties"),k=d.getAttribute("properties")||{},l=a.getProperties();for(m in l)l[m]!==b[m]&&l[m]&&!k[m]&&(c.isJSONSchema(j)?j.validate(l[m],f,a,d,m):j===!1&&f.addError(a,d,"additionalProperties","Additional properties are not allowed",j))}}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):void 0},validator:function(a,b,d,e,f){var i;"undefined"!==a.getType()&&f&&"undefined"!==f.getType()&&(i=b.getAttribute("requires"),"string"==typeof i?"undefined"===f.getProperty(i).getType()&&e.addError(a,b,"requires",'Property requires sibling property "'+i+'"',i):c.isJSONSchema(i)&&i.validate(f,e))}},minimum:{type:"number",optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("minimum"),i=b.getAttribute("minimumCanEqual"),"number"==typeof h&&(h>a.getValue()||i===!1&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less than the required minimum value",h))}},maximum:{type:"number",optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("maximum"),i=b.getAttribute("maximumCanEqual"),"number"==typeof h&&(a.getValue()>h||i===!1&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",h))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){var h;"array"===a.getType()&&(h=b.getAttribute("minItems"),"number"==typeof h&&h>a.getProperties().length&&d.addError(a,b,"minItems","The number of items is less than the required minimum",h))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;"array"===a.getType()&&(h=b.getAttribute("maxItems"),"number"==typeof h&&a.getProperties().length>h&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",h))}},uniqueItems:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){var h,i,j,k,l;if("array"===a.getType()&&b.getAttribute("uniqueItems"))for(h=a.getProperties(),i=0,j=h.length-1;j>i;++i)for(k=i+1,l=h.length;l>k;++k)h[i].equals(h[k])&&d.addError(a,b,"uniqueItems","Array can only contain unique items",{x:i,y:k})}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a){return"string"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;try{h=RegExp(b.getAttribute("pattern")),"string"===a.getType()&&h&&!h.test(a.getValue())&&d.addError(a,b,"pattern","String does not match pattern",""+h)}catch(i){d.addError(a,b,"pattern","Invalid pattern",i)}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){var h;"string"===a.getType()&&(h=b.getAttribute("minLength"),"number"==typeof h&&h>a.getValue().length&&d.addError(a,b,"minLength","String is less than the required minimum length",h))}},maxLength:{type:"integer",optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;"string"===a.getType()&&(h=b.getAttribute("maxLength"),"number"==typeof h&&a.getValue().length>h&&d.addError(a,b,"maxLength","String is greater than the required maximum length",h))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a){return"array"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i,j;if("undefined"!==a.getType()&&(h=b.getAttribute("enum"))){for(i=0,j=h.length;j>i;++i)if(a.equals(h[i]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",h)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a){return"string"===a.getType()?a.getValue():void 0},validator:function(a,c,d,e){var i,j;"string"===a.getType()&&(i=c.getAttribute("format"),j=d.getValueOfProperty("formatValidators"),"string"!=typeof i||j[i]===b[i]||"function"!=typeof j[i]||j[i].call(this,a,e)||e.addError(a,c,"format","String is not in the required format",i))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},"default":{type:"any",optional:!0},divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;"number"===a.getType()&&(h=b.getAttribute("divisibleBy"),0===h?d.addError(a,b,"divisibleBy","Nothing is divisible by 0",h):1!==h&&0!==a.getValue()/h%1&&d.addError(a,b,"divisibleBy","Number is not divisible by "+h,h))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a){return"string"===a.getType()||"array"===a.getType()?a.getValue():void 0},validator:function(a,d,e,f){var k,l,m,n,j=c.toArray(d.getAttribute("disallow"));if("undefined"!==a.getType()&&j&&j.length){for(n=e.getValueOfProperty("typeValidators")||{},k=0,l=j.length;l>k;++k)if(m=j[k],n[m]!==b[m]&&"function"==typeof n[m]&&n[m](a,f))return f.addError(a,d,"disallow","Instance is a disallowed type",j),!1;return!0}return!0},typeValidators:e},"extends":{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?c.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):void 0},validator:function(a,b,d,e,f,g,h){var j,k,i=b.getAttribute("extends");if(i)if(c.isJSONSchema(i))i.validate(a,e,f,g,h);else if("array"===c.typeOf(i))for(j=0,k=i.length;k>j;++j)i[j].validate(a,e,f,g,h)}}},optional:!0,"default":{},fragmentResolution:"slash-delimited",parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b):void 0},validator:function(a,d,e,f,g,h,i){var k,l,n,j=d.getPropertyNames(),m=e.getAttribute("properties");for(k in m)m[k]!==b[k]&&m[k].getValueOfProperty("validationRequired")&&c.pushUnique(j,k);for(k=0,l=j.length;l>k;++k)m[j[k]]!==b[j[k]]&&(n=m[j[k]].getValueOfProperty("validator"),"function"==typeof n&&n(a,d,m[j[k]],f,g,h,i))},initializer:function(a){var b,d,e;return b=a._schema.getLink("describedby",a),b&&a._schema._uri!==b&&a.setReference("describedby",b),b=a._schema.getLink("self",a),"string"===c.typeOf(b)&&(a._uri=c.formatURI(b)),b=a._schema.getLink("full",a),b&&a._uri!==b&&a.setReference("full",b),d=a.getAttribute("extends"),c.isJSONSchema(d)&&(e=c.inherits(d,a,!0),a=a._env.createSchema(e,a._schema,a._uri)),a
}},!0,"http://json-schema.org/schema#"),g=d.createSchema(c.inherits(f,d.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,d){var e,f=b.getValueOfProperty("items").$ref,g=b.getEnvironment().findSchema(f),h=g&&g.getValueOfProperty("parser");return d=c.toArray(d),e="function"==typeof h?c.mapArray(a.getProperties(),function(a){return h(a,g)}):c.toArray(a.getValue()),d[0]&&(e=c.filterArray(e,function(a){return a.rel===d[0]})),d[1]&&(e=c.mapArray(e,function(a){var b=d[1],e=a.href;return e=e.replace(/\{(.+)\}/g,function(a,c){var f;return f="-this"===c?b.getValue():b.getValueOfProperty(c),void 0!==f?f+"":""}),e?c.formatURI(b.resolveURI(e)):e})),e}},fragmentResolution:{type:"string",optional:!0,"default":"slash-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d){var h;"undefined"!==a.getType()&&(h=b.getAttribute("pathStart"),"string"==typeof h&&0!==a.getURI().indexOf(h)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+h,h))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}]},f),!0),!0,"http://json-schema.org/hyper-schema#"),d.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#"),h=d.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},targetSchema:{$ref:"hyper-schema#",parser:g.getAttribute("parser")},method:{type:"string","default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,d){var e=a.getEnvironment(),f=b.getEnvironment(),g=b.getValueOfProperty("additionalProperties").$ref;return"object"===a.getType()?d?e.createSchema(a.getProperty(d),f.findSchema(b.resolveURI(g))):c.mapObject(a.getProperties(),function(a){return e.createSchema(a,f.findSchema(b.resolveURI(g)))}):void 0}}},parser:function(a,b){var d=b.getProperty("properties");return"object"===a.getType()?c.mapObject(a.getProperties(),function(a,b){var c=d.getProperty(b),e=c&&c.getValueOfProperty("parser");return"function"==typeof e?e(a,c):a.getValue()}):a.getValue()}},g,"http://json-schema.org/links#"),c.registerEnvironment("json-schema-draft-02",d),c.getDefaultEnvironmentID()&&"json-schema-draft-01"!==c.getDefaultEnvironmentID()||c.setDefaultEnvironmentID("json-schema-draft-02")})()}),define("#jsv/4.0.2/json-schema-draft-03",["./jsv"],function(a){(function(){function D(a,d,e,f){var h,i,j,k,l,g={};if("object"===a.getType()){h=d.getAttribute("patternProperties"),k=a.getProperties();for(i in h)if(h[i]!==b[i]){j=null;try{j=RegExp(i)}catch(m){e&&e.addError(d,f,"patternProperties","Invalid pattern",i)}if(j)for(l in k)k[l]!==b[l]&&j.test(l)&&(g[l]=g[l]?c.pushUnique(g[l],h[i]):[h[i]])}}return g}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,b={},c=a("./jsv").JSV;d={string:function(a){return"string"===a.getType()},number:function(a){return"number"===a.getType()},integer:function(a){return"number"===a.getType()&&0===a.getValue()%1},"boolean":function(a){return"boolean"===a.getType()},object:function(a){return"object"===a.getType()},array:function(a){return"array"===a.getType()},"null":function(a){return"null"===a.getType()},any:function(){return!0}},e=new c.Environment,e.setOption("validateReferences",!0),e.setOption("enforceReferences",!1),e.setOption("strict",!1),f={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,b){var d;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(d=b.getValueOfProperty("parser"),c.mapArray(a.getProperties(),function(a){return d(a,b)})):"any"},validator:function(a,d,e,f,g,h,i){var k,l,m,n,o,j=c.toArray(d.getAttribute("type"));if("undefined"!==a.getType()&&j&&j.length){for(o=e.getValueOfProperty("typeValidators")||{},k=0,l=j.length;l>k;++k)if(m=j[k],c.isJSONSchema(m)){if(n=c.createObject(f),n.errors=[],n.validated=c.clone(f.validated),0===m.validate(a,n,g,h,i).errors.length)return!0}else{if(o[m]===b[m]||"function"!=typeof o[m])return!0;if(o[m](a,f))return!0}return f.addError(a,d,"type","Instance is not a required type",j),!1}return!0},typeValidators:d},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,b,d){var e=a.getEnvironment(),f=b.getEnvironment();return"object"===a.getType()?d?e.createSchema(a.getProperty(d),f.findSchema(b.resolveURI("#"))):c.mapObject(a.getProperties(),function(a){return e.createSchema(a,f.findSchema(b.resolveURI("#")))}):{}},validator:function(a,c,d,e){var i,j;if("object"===a.getType()){i=c.getAttribute("properties");for(j in i)i[j]!==b[j]&&i[j]&&i[j].validate(a.getProperty(j),e,a,c,j)}}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?c.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,d,e){var i,j,k,l,m,n;if("array"===a.getType())if(i=a.getProperties(),j=b.getAttribute("items"),n=b.getAttribute("additionalProperties"),"array"===c.typeOf(j))for(k=0,l=i.length;l>k;++k)m=j[k]||n,m!==!1?m.validate(i[k],e,a,b,k):e.addError(a,b,"additionalProperties","Additional items are not allowed",m);else for(m=j||n,k=0,l=i.length;l>k;++k)m.validate(i[k],e,a,b,k)}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"!==a.getType()||b.getAttribute("optional")||d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"boolean"===a.getType()&&a.getValue()===!1?!1:a.getEnvironment().createEmptySchema()},validator:function(a,d,e,f){var j,k,l,m;if("object"===a.getType()){j=d.getAttribute("additionalProperties"),k=d.getAttribute("properties")||{},l=a.getProperties();for(m in l)l[m]!==b[m]&&l[m]&&k[m]===b[m]&&(c.isJSONSchema(j)?j.validate(l[m],f,a,d,m):j===!1&&f.addError(a,d,"additionalProperties","Additional properties are not allowed",j))}}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):void 0},validator:function(a,b,d,e,f){var i;"undefined"!==a.getType()&&f&&"undefined"!==f.getType()&&(i=b.getAttribute("requires"),"string"==typeof i?"undefined"===f.getProperty(i).getType()&&e.addError(a,b,"requires",'Property requires sibling property "'+i+'"',i):c.isJSONSchema(i)&&i.validate(f,e))}},minimum:{type:"number",optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("minimum"),i=b.getAttribute("minimumCanEqual"),"number"==typeof h&&(h>a.getValue()||i===!1&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less than the required minimum value",h))}},maximum:{type:"number",optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("maximum"),i=b.getAttribute("maximumCanEqual"),"number"==typeof h&&(a.getValue()>h||i===!1&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",h))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){var h;"array"===a.getType()&&(h=b.getAttribute("minItems"),"number"==typeof h&&h>a.getProperties().length&&d.addError(a,b,"minItems","The number of items is less than the required minimum",h))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;"array"===a.getType()&&(h=b.getAttribute("maxItems"),"number"==typeof h&&a.getProperties().length>h&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",h))}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a){return"string"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;try{h=RegExp(b.getAttribute("pattern")),"string"===a.getType()&&h&&!h.test(a.getValue())&&d.addError(a,b,"pattern","String does not match pattern",""+h)}catch(i){d.addError(b,c,"pattern","Invalid pattern",b.getValueOfProperty("pattern"))}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){var h;"string"===a.getType()&&(h=b.getAttribute("minLength"),"number"==typeof h&&h>a.getValue().length&&d.addError(a,b,"minLength","String is less than the required minimum length",h))}},maxLength:{type:"integer",optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h;"string"===a.getType()&&(h=b.getAttribute("maxLength"),"number"==typeof h&&a.getValue().length>h&&d.addError(a,b,"maxLength","String is greater than the required maximum length",h))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a){return"array"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i,j;if("undefined"!==a.getType()&&(h=b.getAttribute("enum"))){for(i=0,j=h.length;j>i;++i)if(a.equals(h[i]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",h)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a){return"string"===a.getType()?a.getValue():void 0},validator:function(a,c,d,e){var i,j;"string"===a.getType()&&(i=c.getAttribute("format"),j=d.getValueOfProperty("formatValidators"),"string"!=typeof i||j[i]===b[i]||"function"!=typeof j[i]||j[i].call(this,a,e)||e.addError(a,c,"format","String is not in the required format",i))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},"default":{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("maxDecimal"),"number"==typeof h&&(i=a.getValue().toString(10).split(".")[1],i&&i.length>h&&d.addError(a,b,"maxDecimal","The number of decimal places is greater than the allowed maximum",h)))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a){return"string"===a.getType()||"array"===a.getType()?a.getValue():void 0},validator:function(a,d,e,f,g,h,i){var k,l,m,n,o,j=c.toArray(d.getAttribute("disallow"));if("undefined"!==a.getType()&&j&&j.length){for(n=e.getValueOfProperty("typeValidators")||{},k=0,l=j.length;l>k;++k)if(m=j[k],c.isJSONSchema(m)){if(o=c.createObject(f),o.errors=[],o.validated=c.clone(f.validated),0===m.validate(a,o,g,h,i).errors.length)return f.addError(a,d,"disallow","Instance is a disallowed type",j),!1}else if(n[m]!==b[m]&&"function"==typeof n[m]&&n[m](a,f))return f.addError(a,d,"disallow","Instance is a disallowed type",j),!1;return!0}return!0},typeValidators:d},"extends":{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?c.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):void 0},validator:function(a,b,d,e,f,g,h){var j,k,i=b.getAttribute("extends");if(i)if(c.isJSONSchema(i))i.validate(a,e,f,g,h);else if("array"===c.typeOf(i))for(j=0,k=i.length;k>j;++j)i[j].validate(a,e,f,g,h)}}},optional:!0,"default":{},fragmentResolution:"dot-delimited",parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b):void 0},validator:function(a,d,e,f,g,h,i){var k,l,o,j=d.getPropertyNames(),m=e.getAttribute("properties"),n=a.getEnvironment().getOption("strict");for(k in m)m[k]!==b[k]&&(m[k].getValueOfProperty("validationRequired")&&c.pushUnique(j,k),n&&m[k].getValueOfProperty("deprecated")&&c.popFirst(j,k));for(k=0,l=j.length;l>k;++k)m[j[k]]!==b[j[k]]&&(o=m[j[k]].getValueOfProperty("validator"),"function"==typeof o&&o(a,d,m[j[k]],f,g,h,i))}},g={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,d){var e,i,f=b.getValueOfProperty("items").$ref,g=b.getEnvironment().findSchema(f),h=g&&g.getValueOfProperty("parser");return d=c.toArray(d),e="function"==typeof h?c.mapArray(a.getProperties(),function(a){return h(a,g)}):c.toArray(a.getValue()),d[0]&&(e=c.filterArray(e,function(a){return a.rel===d[0]})),d[1]&&(i=b.getValueOfProperty("selfReferenceVariable"),e=c.mapArray(e,function(a){var b=d[1],e=a.href;return e=e.replace(/\{(.+)\}/g,function(a,c){var f;return f=c===i?b.getValue():b.getValueOfProperty(c),void 0!==f?f+"":""}),e?c.formatURI(b.resolveURI(e)):e})),e},selfReferenceVariable:"-this"},fragmentResolution:{type:"string",optional:!0,"default":"dot-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d){var h;"undefined"!==a.getType()&&(h=b.getAttribute("pathStart"),"string"==typeof h&&0!==a.getURI().indexOf(h)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+h,h))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}],initializer:function(a){var b,d,e;return b=a._schema.getLink("describedby",a),b&&a._schema._uri!==b&&a.setReference("describedby",b),b=a._schema.getLink("self",a),"string"===c.typeOf(b)&&(a._uri=c.formatURI(b)),b=a._schema.getLink("full",a),b&&a._uri!==b&&a.setReference("full",b),d=a.getAttribute("extends"),c.isJSONSchema(d)&&(e=c.inherits(d,a,!0),a=a._env.createSchema(e,a._schema,a._uri)),a}},h={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},method:{type:"string","default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,d){var e=a.getEnvironment(),f=b.getEnvironment(),g=b.getValueOfProperty("additionalProperties").$ref;return"object"===a.getType()?d?e.createSchema(a.getProperty(d),f.findSchema(b.resolveURI(g))):c.mapObject(a.getProperties(),function(a){return e.createSchema(a,f.findSchema(b.resolveURI(g)))}):void 0}}},parser:function(a,b){var d=b.getProperty("properties");return"object"===a.getType()?c.mapObject(a.getProperties(),function(a,b){var c=d.getProperty(b),e=c&&c.getValueOfProperty("parser");return"function"==typeof e?e(a,c):a.getValue()}):a.getValue()}},e.setOption("defaultFragmentDelimiter","."),e.setOption("defaultSchemaURI","http://json-schema.org/draft-00/schema#"),i=e.createSchema(f,!0,"http://json-schema.org/draft-00/schema#"),j=e.createSchema(c.inherits(i,e.createSchema(g,!0,"http://json-schema.org/draft-00/hyper-schema#"),!0),!0,"http://json-schema.org/draft-00/hyper-schema#"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-00/hyper-schema#"),k=e.createSchema(h,j,"http://json-schema.org/draft-00/links#"),l=c.inherits(f,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/schema#"}),m=c.inherits(g,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/hyper-schema#"}),n=c.inherits(h,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/links#"}),e.setOption("defaultSchemaURI","http://json-schema.org/draft-01/schema#"),o=e.createSchema(l,!0,"http://json-schema.org/draft-01/schema#"),p=e.createSchema(c.inherits(o,e.createSchema(m,!0,"http://json-schema.org/draft-01/hyper-schema#"),!0),!0,"http://json-schema.org/draft-01/hyper-schema#"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-01/hyper-schema#"),q=e.createSchema(n,p,"http://json-schema.org/draft-01/links#"),r=c.inherits(l,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/schema#",properties:{uniqueItems:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){var h,i,j,k,l;if("array"===a.getType()&&b.getAttribute("uniqueItems"))for(h=a.getProperties(),i=0,j=h.length-1;j>i;++i)for(k=i+1,l=h.length;l>k;++k)h[i].equals(h[k])&&d.addError(a,b,"uniqueItems","Array can only contain unique items",{x:i,y:k})}},maxDecimal:{deprecated:!0},divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,optional:!0,parser:function(a){return"number"===a.getType()?a.getValue():void 0},validator:function(a,b,c,d){var h,i,j;"number"===a.getType()&&(h=b.getAttribute("divisibleBy"),0===h?d.addError(a,b,"divisibleBy","Nothing is divisible by 0",h):1!==h&&(i=a.getValue(),j=Math.max(((""+i).split(".")[1]||" ").length,((""+h).split(".")[1]||" ").length),j=parseFloat((i/h%1).toFixed(j)),j>0&&1>j&&d.addError(a,b,"divisibleBy","Number is not divisible by "+h,h)))}}},fragmentResolution:"slash-delimited"}),s=c.inherits(m,{id:"http://json-schema.org/draft-02/hyper-schema#",properties:{fragmentResolution:{"default":"slash-delimited"}}}),t=c.inherits(n,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/links#",properties:{targetSchema:{$ref:"hyper-schema#",parser:p.getAttribute("parser")}}}),e.setOption("defaultFragmentDelimiter","/"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-02/schema#"),u=e.createSchema(r,!0,"http://json-schema.org/draft-02/schema#"),v=e.createSchema(c.inherits(u,e.createSchema(s,!0,"http://json-schema.org/draft-02/hyper-schema#"),!0),!0,"http://json-schema.org/draft-02/hyper-schema#"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-02/hyper-schema#"),w=e.createSchema(t,v,"http://json-schema.org/draft-02/links#"),x=c.inherits(r,{$schema:"http://json-schema.org/draft-03/schema#",id:"http://json-schema.org/draft-03/schema#",properties:{patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{},parser:u.getValueOfProperty("properties").properties.parser,validator:function(a,c,d,e){var i,j,k;if("object"===a.getType()){i=D(a,c,e,d);for(j in i)if(i[j]!==b[j])for(k=i[j].length;k--;)i[j][k].validate(a.getProperty(j),e,a,c,j)}}},additionalProperties:{validator:function(a,d,e,f){var j,k,l,m,n;if("object"===a.getType()){j=d.getAttribute("additionalProperties"),k=d.getAttribute("properties")||{},l=a.getProperties(),m=D(a,d);for(n in l)l[n]!==b[n]&&l[n]&&k[n]===b[n]&&m[n]===b[n]&&(c.isJSONSchema(j)?j.validate(l[n],f,a,d,n):j===!1&&f.addError(a,d,"additionalProperties","Additional properties are not allowed",j))}}},items:{validator:function(a,b,d,e){var i,j,k,l,m,n;if("array"===a.getType())if(i=a.getProperties(),j=b.getAttribute("items"),n=b.getAttribute("additionalItems"),"array"===c.typeOf(j))for(k=0,l=i.length;l>k;++k)m=j[k]||n,m!==!1?m.validate(i[k],e,a,b,k):e.addError(a,b,"additionalItems","Additional items are not allowed",m);else for(m=j||n,k=0,l=i.length;l>k;++k)m.validate(i[k],e,a,b,k)}},additionalItems:{type:[{$ref:"#"},"boolean"],"default":{},parser:u.getValueOfProperty("properties").additionalProperties.parser,validator:function(a,b,c,d){var h,i,j,k;if("array"===a.getType()&&"undefined"===b.getProperty("items").getType())if(h=b.getAttribute("additionalItems"),i=a.getProperties(),h!==!1)for(j=0,k=i.length;k>j;++j)h.validate(i[j],d,a,b,j);else i.length&&d.addError(a,b,"additionalItems","Additional items are not allowed",h)}},optional:{validationRequired:!1,deprecated:!0},required:{type:"boolean","default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"===a.getType()&&b.getAttribute("required")&&d.addError(a,b,"required","Property is required",!0)}},requires:{deprecated:!0},dependencies:{type:"object",additionalProperties:{type:["string","array",{$ref:"#"}],items:{type:"string"}},"default":{},parser:function(a,b,d){function e(a){var c=a.getType();return"string"===c||"array"===c?a.getValue():"object"===c?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):void 0}return"object"===a.getType()?d?e(a.getProperty(d)):c.mapObject(a.getProperties(),e):{}},validator:function(a,d,e,f){var j,k,l,m,n,o;if("object"===a.getType()){j=d.getAttribute("dependencies");for(k in j)if(j[k]!==b[k]&&"undefined"!==a.getProperty(k).getType())if(l=j[k],m=c.typeOf(l),"string"===m)"undefined"===a.getProperty(l).getType()&&f.addError(a,d,"dependencies",'Property "'+k+'" requires sibling property "'+l+'"',j);else if("array"===m)for(n=0,o=l.length;o>n;++n)"undefined"===a.getProperty(l[n]).getType()&&f.addError(a,d,"dependencies",'Property "'+k+'" requires sibling property "'+l[n]+'"',j);else c.isJSONSchema(l)&&l.validate(a,f)}}},minimumCanEqual:{deprecated:!0},maximumCanEqual:{deprecated:!0},exclusiveMinimum:{type:"boolean","default":!1,parser:function(a){return!!a.getValue()}},exclusiveMaximum:{type:"boolean","default":!1,parser:function(a){return!!a.getValue()}},minimum:{validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("minimum"),i=b.getAttribute("exclusiveMinimum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("minimumCanEqual"),"number"==typeof h&&(h>a.getValue()||i===!0&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less than the required minimum value",h))}},maximum:{validator:function(a,b,c,d){var h,i;"number"===a.getType()&&(h=b.getAttribute("maximum"),i=b.getAttribute("exclusiveMaximum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("maximumCanEqual"),"number"==typeof h&&(a.getValue()>h||i===!0&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",h))}},contentEncoding:{deprecated:!0},divisibleBy:{exclusiveMinimum:!0},disallow:{items:{type:["string",{$ref:"#"}]},parser:r.properties.type.parser},id:{type:"string",format:"uri"},$ref:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"}},dependencies:{exclusiveMinimum:"minimum",exclusiveMaximum:"maximum"},initializer:function(a){var b,d,e,f=a.getValueOfProperty("$schema"),g=a.getValueOfProperty("$ref"),h=a.getValueOfProperty("id");return f&&(b=a.resolveURI(f),a.setReference("describedby",b)),h&&(b=a.resolveURI(h),"string"===c.typeOf(b)&&(a._uri=c.formatURI(b))),g&&(b=a.resolveURI(g),a.setReference("full",b)),d=a.getAttribute("extends"),c.isJSONSchema(d)&&(e=c.inherits(d,a,!0),a=a._env.createSchema(e,a._schema,a._uri)),a}}),y=c.inherits(s,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/hyper-schema#",properties:{links:{selfReferenceVariable:"@"},root:{deprecated:!0},contentEncoding:{deprecated:!1},alternate:{deprecated:!0}}}),z=c.inherits(t,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/links#",properties:{href:{required:!0,format:"link-description-object-template"},rel:{required:!0},properties:{deprecated:!0},schema:{$ref:"http://json-schema.org/draft-03/hyper-schema#"}}}),e.setOption("defaultSchemaURI","http://json-schema.org/draft-03/schema#"),A=e.createSchema(x,!0,"http://json-schema.org/draft-03/schema#"),B=e.createSchema(c.inherits(A,e.createSchema(y,!0,"http://json-schema.org/draft-03/hyper-schema#"),!0),!0,"http://json-schema.org/draft-03/hyper-schema#"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-03/hyper-schema#"),C=e.createSchema(z,!0,"http://json-schema.org/draft-03/links#"),e.setOption("latestJSONSchemaSchemaURI","http://json-schema.org/draft-03/schema#"),e.setOption("latestJSONSchemaHyperSchemaURI","http://json-schema.org/draft-03/hyper-schema#"),e.setOption("latestJSONSchemaLinksURI","http://json-schema.org/draft-03/links#"),e._schemas["http://json-schema.org/schema#"]=A,e._schemas["http://json-schema.org/hyper-schema#"]=B,e._schemas["http://json-schema.org/links#"]=C,c.registerEnvironment("json-schema-draft-03",e),c.getDefaultEnvironmentID()&&"json-schema-draft-01"!==c.getDefaultEnvironmentID()&&"json-schema-draft-02"!==c.getDefaultEnvironmentID()||c.setDefaultEnvironmentID("json-schema-draft-03")})()}),define("#jsv/4.0.2/jsv",["./uri/uri","./environments","./json-schema-draft-01","./json-schema-draft-02","./json-schema-draft-03"],function(a,b){var b=b||this,a=a||function(){return b};(function(){function j(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}function k(){}function l(a){return k.prototype=a||{},new k}function m(a,b,c){var f,e={};for(f in a)a[f]!==d[f]&&(e[f]=b.call(c,a[f],f,a));return e}function n(a){return void 0!==a&&null!==a?a instanceof Array&&!a.callee?a:"number"!=typeof a.length||a.split||a.setInterval||a.call?[a]:Array.prototype.slice.call(a):[]}function o(a){var c,b=[];switch(j(a)){case"object":for(c in a)a[c]!==d[c]&&(b[b.length]=c);break;case"array":for(c=a.length-1;c>=0;--c)b[c]=c}return b}function p(a,b){return-1===h(a,b)&&a.push(b),a}function q(a,b){var c=h(a,b);return c>-1&&a.splice(c,1),a}function r(){return[e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],"-",e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],"-4",e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],"-",e[8|3&Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],"-",e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())],e[Math.floor(16*Math.random())]].join("")}function s(a){return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function t(a){return"string"==typeof a&&-1===a.indexOf("#")&&(a+="#"),a}function u(a){if(a instanceof x)return a.getURI();switch(j(a)){case"undefined":case"null":case"boolean":case"number":case"string":return a;case"object":return m(a,u);case"array":return f(a,u);default:return""+a}}function v(a,b,c,d,e){Error.call(this,d),this.uri=a instanceof x?a.getURI():a,this.schemaUri=b instanceof x?b.getURI():b,this.attribute=c,this.message=d,this.description=d,this.details=e}function w(){this.errors=[],this.validated={}}function x(a,b,d,e){b instanceof x&&("string"!=typeof e&&(e=b._fd),"string"!=typeof d&&(d=b._uri),b=b._value),"string"!=typeof d?d="urn:uuid:"+r()+"#":-1===d.indexOf(":")&&(d=t(c.resolve("urn:uuid:"+r()+"#",d))),this._env=a,this._value=b,this._uri=d,this._fd=e||this._env._options.defaultFragmentDelimiter}function y(a,b){var c,e;switch(a instanceof x&&(a=a.getValue()),j(a)){case"object":if(b){c={};for(e in a)a[e]!==d[e]&&(c[e]=y(a[e],b));return c}return l(a);case"array":if(b){for(c=Array(a.length),e=a.length;--e>=0;)c[e]=y(a[e],b);return c}return Array.prototype.slice.call(a);default:return a}}function z(a,b,c,d){var e;return x.call(this,a,b,c),this._schema=d===!0?this:b instanceof z&&!(d instanceof z)?b._schema:d instanceof z?d:this._env.getDefaultSchema()||this._env.createEmptySchema(),e=this._schema.getValueOfProperty("fragmentResolution"),"dot-delimited"===e?this._fd=".":"slash-delimited"===e&&(this._fd="/"),this.rebuild()}function A(a){return function(){for(var e,b=this,c=[],d=b._refs&&b._refs.full;d;)if(e=b._env.findSchema(d)){if(e._value===b._value)break;if(b=e,c.push(d),d=b._refs&&b._refs.full,c.indexOf(d)>-1)break}else{if(b._env._options.enforceReferences)throw new v(b,b._schema,"{full}","Unknown schema reference",d);d=null}return a.apply(b,arguments)}}function B(a,b,c){var g,h,e=j(a),f=j(b);if("undefined"===f)return y(a,!0);if("undefined"===e||f!==e)return y(b,!0);if("object"===f){a instanceof z&&(a=a.getAttributes()),b instanceof z&&(b=b.getAttributes(),b["extends"]&&c&&b["extends"]instanceof z&&(b["extends"]=[b["extends"]])),g=y(a,!0);for(h in b)b[h]!==d[h]&&(g[h]=B(a[h],b[h],c));return g}return y(b,!0)}function C(){this._id=r(),this._schemas={},this._options={},this.createSchema({},!0,"urn:jsv:empty-schema#")}var f,g,h,i,c=a("./uri/uri").URI,d={},e="0123456789abcdef".split("");f=function(a,b,c){for(var d=0,e=a.length,f=Array(e);e>d;++d)f[d]=b.call(c,a[d],d,a);return f},Array.prototype.map&&(f=function(a,b,c){return Array.prototype.map.call(a,b,c)}),g=function(a,b,c){for(var d=0,e=a.length,f=[];e>d;++d)b.call(c,a[d],d,a)&&(f[f.length]=a[d]);return f},Array.prototype.filter&&(g=function(a,b,c){return Array.prototype.filter.call(a,b,c)}),h=function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1},Array.prototype.indexOf&&(h=function(a,b){return Array.prototype.indexOf.call(a,b)}),v.prototype=Error(),v.prototype.constructor=v,v.prototype.name="InitializationError",w.prototype.addError=function(a,b,c,d,e){this.errors.push({uri:a instanceof x?a.getURI():a,schemaUri:b instanceof x?b.getURI():b,attribute:c,message:d,details:u(e)})},w.prototype.registerValidation=function(a,b){this.validated[a]?this.validated[a].push(b):this.validated[a]=[b]},w.prototype.isValidatedBy=function(a,b){return!!this.validated[a]&&-1!==h(this.validated[a],b)},x.prototype.getEnvironment=function(){return this._env},x.prototype.getType=function(){return j(this._value)},x.prototype.getValue=function(){return this._value},x.prototype.getURI=function(){return this._uri},x.prototype.resolveURI=function(a){return t(c.resolve(this._uri,a))},x.prototype.getPropertyNames=function(){return o(this._value)},x.prototype.getProperty=function(a){var b=this._value?this._value[a]:void 0;return b instanceof x?b:new x(this._env,b,this._uri+this._fd+s(a),this._fd)},x.prototype.getProperties=function(){var a=j(this._value),b=this;return"object"===a?m(this._value,function(a,c){return a instanceof x?a:new x(b._env,a,b._uri+b._fd+s(c),b._fd)}):"array"===a?f(this._value,function(a,c){return a instanceof x?a:new x(b._env,a,b._uri+b._fd+s(c),b._fd)}):void 0},x.prototype.getValueOfProperty=function(a){return this._value?this._value[a]instanceof x?this._value[a]._value:this._value[a]:void 0
},x.prototype.equals=function(a){return a instanceof x?this._value===a._value:this._value===a},z.prototype=l(x.prototype),z.prototype.getSchema=function(){var b,a=this._refs&&this._refs.describedby;if(a)if(b=a&&this._env.findSchema(a))b.equals(this._schema)||(this._schema=b,this.rebuild());else if(this._env._options.enforceReferences)throw new v(this,this._schema,"{describedby}","Unknown schema reference",a);return this._schema},z.prototype.getAttribute=function(a,b){var c,d,e,f,g=this.getSchema();return!b&&this._attributes&&this._attributes.hasOwnProperty(a)?this._attributes[a]:(c=g.getProperty("properties").getProperty(a),d=c.getValueOfProperty("parser"),e=this.getProperty(a),"function"==typeof d?(f=d(e,c,b),!b&&this._attributes&&(this._attributes[a]=f),f):e.getValue())},z.prototype.getAttributes=function(){var a,b,c,e,f,g=this.getSchema();if(!this._attributes&&"object"===this.getType()){a=this.getProperties(),b=g.getProperty("properties"),this._attributes={};for(c in a)a[c]!==d[c]&&(e=b&&b.getProperty(c),f=e&&e.getValueOfProperty("parser"),this._attributes[c]="function"==typeof f?f(a[c],e):a[c].getValue())}return y(this._attributes,!1)},z.prototype.getLink=function(a,b){var c=this.getAttribute("links",[a,b]);return c&&c.length&&c[c.length-1]?c[c.length-1]:void 0},z.prototype.validate=function(a,b,c,d,e){var f=this.getSchema(),g=f.getValueOfProperty("validator");return a instanceof x||(a=this.getEnvironment().createInstance(a)),b instanceof w||(b=new w),this._env._options.validateReferences&&this._refs&&(this._refs.describedby&&!this._env.findSchema(this._refs.describedby)&&b.addError(this,this._schema,"{describedby}","Unknown schema reference",this._refs.describedby),this._refs.full&&!this._env.findSchema(this._refs.full)&&b.addError(this,this._schema,"{full}","Unknown schema reference",this._refs.full)),"function"!=typeof g||b.isValidatedBy(a.getURI(),this.getURI())||(b.registerValidation(a.getURI(),this.getURI()),g(a,this,f,b,c,d,e)),b},function(){var a;for(a in z.prototype)z.prototype[a]!==d[a]&&"function"===j(z.prototype[a])&&(z.prototype[a]=A(z.prototype[a]))}(),z.prototype.rebuild=function(){var a=this,b=a.getSchema().getValueOfProperty("initializer");return a._refs=null,a._attributes=null,"function"==typeof b&&(a=b(a)),a._env._schemas[a._uri]=a,a.getAttributes(),a},z.prototype.setReference=function(a,b){this._refs||(this._refs={}),this._refs[a]=this.resolveURI(b)},z.prototype.getReference=function(a){return this._refs&&this._refs[a]},C.prototype.clone=function(){var a=new C;return a._schemas=l(this._schemas),a._options=l(this._options),a},C.prototype.createInstance=function(a,b){return b=t(b),a instanceof x&&(!b||a.getURI()===b)?a:new x(this,a,b)},C.prototype.createSchema=function(a,b,c){return c=t(c),!(a instanceof z)||c&&a._uri!==c||b&&!a.getSchema().equals(b)?new z(this,a,c,b):a},C.prototype.createEmptySchema=function(){return this._schemas["urn:jsv:empty-schema#"]},C.prototype.findSchema=function(a){return this._schemas[t(a)]},C.prototype.setOption=function(a,b){this._options[a]=b},C.prototype.getOption=function(a){return this._options[a]},C.prototype.setDefaultFragmentDelimiter=function(a){"string"==typeof a&&a.length>0&&(this._options.defaultFragmentDelimiter=a)},C.prototype.getDefaultFragmentDelimiter=function(){return this._options.defaultFragmentDelimiter},C.prototype.setDefaultSchemaURI=function(a){"string"==typeof a&&(this._options.defaultSchemaURI=t(a))},C.prototype.getDefaultSchema=function(){return this.findSchema(this._options.defaultSchemaURI)},C.prototype.validate=function(a,b){var c,d,e,f=new w;try{c=this.createInstance(a),f.instance=c}catch(g){f.addError(g.uri,g.schemaUri,g.attribute,g.message,g.details)}try{d=this.createSchema(b),f.schema=d,e=d.getSchema(),f.schemaSchema=e}catch(h){f.addError(h.uri,h.schemaUri,h.attribute,h.message,h.details)}return e&&e.validate(d,f),f.errors.length?f:d.validate(c,f)},C.prototype._checkForInvalidInstances=function(a,b){for(var g,h,i,k,l,c=[],e=[[b,this._schemas[b]]],f=0;a>f++&&e.length;)if(g=e.shift(),h=g[0],i=g[1],i instanceof z)if(this._schemas[i._uri]!==i)c.push("Instance "+h+" does not match "+i._uri);else{k=i.getAttributes();for(l in k)k[l]!==d[l]&&e.push([h+"/"+s(l),k[l]])}else if("object"===j(i)){k=i;for(l in k)k.hasOwnProperty(l)&&e.push([h+"/"+s(l),k[l]])}else if("array"===j(i))for(k=i,l=0;k.length>l;++l)e.push([h+"/"+s(l),k[l]]);return c.length?c:f},i={_environments:{},_defaultEnvironmentID:"",isJSONInstance:function(a){return a instanceof x},isJSONSchema:function(a){return a instanceof z},createEnvironment:function(a){if(a=a||this._defaultEnvironmentID,!this._environments[a])throw Error("Unknown Environment ID");return this._environments[a].clone()},Environment:C,registerEnvironment:function(a,b){a=a||(b||0)._id,a&&!this._environments[a]&&b instanceof C&&(b._id=a,this._environments[a]=b)},setDefaultEnvironmentID:function(a){if("string"==typeof a){if(!this._environments[a])throw Error("Unknown Environment ID");this._defaultEnvironmentID=a}},getDefaultEnvironmentID:function(){return this._defaultEnvironmentID},typeOf:j,createObject:l,mapObject:m,mapArray:f,filterArray:g,searchArray:h,toArray:n,keys:o,pushUnique:p,popFirst:q,clone:y,randomUUID:r,escapeURIComponent:s,formatURI:t,inherits:B,InitializationError:v},this.JSV=i,b.JSV=i,a("./environments")})()});